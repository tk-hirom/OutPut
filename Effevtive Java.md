# 書いた意図
復習して暗記したい。その結果開発時や設計時に引き出せるようにしておきたい

# 2章 オブジェクトの生成と消滅
## 項目1 コンストラクタの代わりにstaticファクトリーメソッドを検討する
通常 コンストラクタ使う
↓
TIPs staticファクトリメソッドを使用する（直接コンストラクタを呼ばせない）
**注意** デザパタのファクトリメソッドとは異なる

Flyweightパターンと似ている

## メリット
1. 名前を持たせることができる
= どんなインスタンスが返ってくるかがわかる
2. コンストラクタと違い、呼び出されるたびに新しいインスタンスを返す必要がない
immutable classの場合、既存のインスタンスを使い回せる
オブジェクトが生成された時にキャッシュしておくことができる 
=> 不必要に重複したオブジェクトを作らなくていい（メモリの節約ができる）
3. 戻り値の型のサブクラスを返すことができる
= 返り値をinterfaceにすることで、実装クラスを隠蔽できる
4. 返されるオブジェクトのクラスは、入力パラメータの値に応じて呼び出しを変えることができる
= パラメータによって、返すサブクラスを変更できる。隠蔽されているから、容易に返すパターンを増減できる(3,4似た感じ)
5. 返されるオブジェクトのクラスは、そのstaticを含むクラスが書かれた時点で存在しなくよくなる

## デメリット?
### 継承してサブクラス作れなくなる（デメリットというよりは、制約）
#### 制約
publicやprotectedのコンストラクタを持たないクラスは、外部からサブクラス化（継承して新しいクラスを作ること）ができません。←そうなんだね
例えば、Javaのコレクションフレームワーク内のユーティリティクラス（CollectionsのunmodifiableListなどが返す不変リストなど）は、これに該当します。
これらのクラスは、staticファクトリメソッドを通じてのみインスタンス化でき、直接継承して拡張することは意図的に制限されています。
#### 制約がもたらす利点
コンポジションの促進: この制約は、プログラマがクラスの継承ではなく、**コンポジション（別のクラスのインスタンスを自クラスのインスタンス変数として持ち、その機能を利用すること)** を選択することを促します。コンポジションは、継承の複雑さや制限を避け、より柔軟かつ再利用しやすい設計を実現します。
不変型のサポート: 不変オブジェクト（作成後にその状態が変化しないオブジェクト）は、安全性やシンプルさ、並行処理における問題の回避などの点で優れています。staticファクトリメソッドのみを提供することで、不変性を維持するための制御が容易になります。これは、オブジェクトの作成方法を厳格に制御し、不変契約を破るようなサブクラスの作成を防ぐためです。
#### 結論
このアプローチにより、プログラマはより慎重にクラスの設計を考え、継承よりもコンポジションを選ぶことが促されます。これは、より安全で再利用しやすい、そして変更に強いソフトウェアの設計へと導くものです。また、不変型の作成と利用を容易にし、多くのプログラミング上の問題を回避するのに役立ちます。

### 探しにくい
コンストラクタと違い、staticファクトリメソッドは、どのクラスに属しているかがわかりにくい

## 項目2 多くのコンストラクタパラメータに直面したときにはビルダーを検討する
### テレスコーピング・コンストラクタ
オブジェクトの作成時に多数のコンストラクタを用意し、それぞれ異なる引数を取ることで、オーバーロードされたコンストラクタを利用してオブジェクトを初期化する方法です。
これにより、同じクラスのインスタンスを異なる状態や構成で作成することが可能になります。

テレスコーピング・コンストラクタ・パターンの主な問題点は、引数の数が増えるにつれて、コンストラクタの管理が難しくなり、コードの可読性が低下することです。

### JavaBeansパターン
パラメーターなしでコンストラクタを呼び出し、オブジェクトを作ってから、setterメソッドで値を設定する方法です。
コンストラクタの引数が多い場合には有効
不変性を担保できないこと。生成途中に不整合な状態になりうる(実行してみるまでバグがあるかどうかわからない)

### ビルダーパターン(これが良い)
必須パラメータを全て持つコンストラクタを読んで、ビルダーオブジェクトを作る
セッター呼ぶ
終わったら、パラメーターなしのbuildメソッドを読んで不変にする
ビルダークラスは、生成するクラスのstaticのメンバークラスで定義されがち
ビルダーのメソッドは自信を返すから連鎖させられる

ビルダー作成のコストが目立つ場合もある